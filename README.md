# various_guile_scripts
Various useful (for me, and may be for you) Guile scripts. Every script here is not a product for somebody, just helpers for me

Здесь содержатся скрипты на языке программирования Scheme, он же Guile.

## gpa.scm
Часто возникает желание или потребность проверить свои баллы в дипломе или аттестате. Получив заветную "корочку" (бакалаврский диплом), я в тот же день решил посчитать свой средний взвешенный балл,
также называемый за бугром как GPA.

Принцип подсчёта прост как два рубля: берём оценки, умножаем оценки на количество часов (или зачётных единиц), а затем делим на общее количество часов (или зачетных единиц).
Сложность и интерес данной задачи в том, что в разных организациях (кстати, GPA считают не только в образовательных учреждениях, но и многих фирмах, если требуется взять выпускника)
имеется множество дополнительных условий на данную задачу. К примеру, самым очевидным является сама система оценивания: в России она пятибалльная (при этом на самом деле это три категории, ибо выпуститься с дипломом и с неудом одновременно невозможно), в Америке, к примеру, она 4х балльная (что по-моему немножко логичнее нашей 5-тибалльной, где более-менее
распространенные оценки начинаются с "2", но сейчас не об этом), в Германии инвертированная и шестибалльная, ... .

Вторым принципиально важным вопросом при подсчёте этого значения является то, какие оценки мы обязаны учитывать: должны ли мы учитывать "зачёты" как "отлично" или
в конечном счёте просто игнорировать их? (Как человек, только что окончивший обучение на бакалариате, скажу, что с точки зрения системы образования да, вообще-то надо)

Считать баллы в табличном редакторе скучно: удовольствия от процесса очень мало, обучения тоже. Поскольку был нужен не столько результат, сколько сам процесс, было
решено написать скрипт.

Хотел был уже установить питон по старой памяти, но рука не дрогнула, и было решено писать на Guile Scheme, чтобы постепенно накапливать опыт в лиспах. Конкретно тут наконец удалось немного разобраться с (define-syntax)'ом, который был немедленно пущен в дело чтобы ~~сделать из лиспа форт~~ реализовать пайп
и тем самым немного уменьшить количество лисповских скобочек на квадратный сантиметр экрана если не в реализации, то хотя бы в основной логике программы.

## getwttr.scm
Существует такой замечательный сервис - wttr.in. Показывает погоду в консоли. Однако порой этот сервис ложиться отдохнуть. Было принято решение написать свой велосипед, чтобы не зависеть от чужого сервиса, и делать запрос хотя бы о текущей погоде за окном напрямую. Большинство решений опираются на данные зарубежных сервисов, среди которых weather.com блокирует любые запросы из России (что категорически неудобно), а openweathermap.com несмотря на слово open категорически отказывается предоставлять API за бесплатно и просит подписку (может быть, я плохо смотрел; то же приложение  DAV^5 лежит в F-Droid абсолютно бесплатныым и свободным, а вот в Google Play его уже продают). Чего уж говорить о Яндексе (кстати, на текущий момент прогноз погоды у них работает ужасно, в отдельных случаях даже фактические данные неверны).

Так или иначе, мне показалось немного проще ~~изобрести свой велосипед~~ делать неофициальные запросы к сайту Гидрометцентра, благо никаких особых палок в колёса любительским парсерам JSON-данных разработчики сайта не делали (за что им огромное спасибо meteoinfo.ru <3 ). Поэтому нам в коде даже не придётся заниматься такими неблагодарными и нехорошими вещами, как парсинг HTML. Правда, сначала пришлось руками немного поковыряться что там да где лежит. Данные в Гидрометцентре обновляются каждые 10 минут, нет никакого смысла делать запросы каждую минуту.
